---
title: Глава 2. Установка и использование ОСРВ Azure NetX LWM2M
description: В этой главе описываются различные проблемы, связанные с установкой, настройкой и использованием компонента ОСРВ Azure NetX LWM2M.
author: philmea
ms.author: philmea
ms.date: 06/04/2020
ms.topic: article
ms.service: rtos
ms.openlocfilehash: 8c13d3b092d3a5b59bd0369f6ffc162509d02590
ms.sourcegitcommit: e3d42e1f2920ec9cb002634b542bc20754f9544e
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/22/2021
ms.locfileid: "104815187"
---
# <a name="chapter-2---installation-and-use-of-azure-rtos-netx-lwm2m"></a>Глава 2. Установка и использование ОСРВ Azure NetX LWM2M

В этой главе описываются различные проблемы, связанные с установкой, настройкой и использованием компонента ОСРВ Azure NetX LWM2M.

## <a name="product-distribution"></a>Распространение продукта

Пакет NetX LWM2M доступен по адресу [https://github.com/azure-rtos/netx](https://github.com/azure-rtos/netx). Пакет содержит три файла исходного кода, один включаемый файл и PDF-файл, содержащий этот документ:

- **nx_lwm2m_client.h**: файл заголовка для клиента NetX LWM2M;

- **nx_lwm2m_*. c/h**: файлы исходного кода C/H для NetX LWM2M;

- **demo_netx_lwm2m_client.c**: демонстрационный файл исходного кода C клиента NetX LWM2M;

- **NetX_LWM2M_User_Guide.pdf**: PDF-файл с описанием продукта NetX LWM2M.

## <a name="netx-lwm2m-installation"></a>Установка протокола NetX LWM2M

Чтобы использовать NetX LWM2M, следует скопировать упомянутый выше дистрибутив целиком в тот же каталог, где установлен экземпляр NetX. Например, если экземпляр NetX установлен в каталог *\\threadx\\arm7\\green*, то файлы *nx_lwm2m&#42;.&#42;* необходимо скопировать в этот каталог.

## <a name="using-netx-lwm2m"></a>Использование протокола NetX LWM2M

Использовать протокол NetX LWM2M просто. В код приложения следует добавить *nx_lwm2m_client.h* после *tx_api.h* и *nx_api.h*, чтобы использовать ThreadX и NetX соответственно. После включения файла *nx_lwm2m_client.h* код приложения может выполнять вызовы функций NetX LWM2M, описанных далее в этом руководстве. Приложение также должно импортировать файлы *nx_lwm2m&#42;.&#42;* в библиотеку NetX.

## <a name="configuration-options"></a>Параметры конфигурации

При сборке библиотеки клиента LWM2M и приложения, использующего клиент LWM2M, можно применить несколько параметров конфигурации. Параметры конфигурации можно определить в исходном коде приложения или в командной строке, если не указано иное.

### <a name="nx_lwm2m_client_disable_error_checking"></a>NX_LWM2M_CLIENT_DISABLE_ERROR_CHECKING

Если этот параметр определен, то он отключает базовый API проверки на ошибки клиента LWM2M и повышает производительность. Коды возврата API, которые не затрагиваются при отключении проверки на ошибки, выделены полужирным шрифтом в определении API.

### <a name="nx_lwm2m_client_disable_float"></a>NX_LWM2M_CLIENT_DISABLE_FLOAT

Если этот параметр определен, то он отключает поддержку чисел с плавающей запятой. В этом случае клиент LWM2M не сможет поддерживать ресурсы с типом данных с плавающей запятой.

### <a name="nx_lwm2m_client_disable_float64"></a>NX_LWM2M_CLIENT_DISABLE_FLOAT64

Если этот параметр определен, то он отключает поддержку 64-разрядных чисел с плавающей запятой. Клиент LWM2M по-прежнему сможет принимать сообщения TLV, содержащие 64-разрядные числа с плавающей запятой, но для обработки эти значения будут преобразовываться в 32-разрядные числа с плавающей запятой.

### <a name="nx_lwm2m_client_priority"></a>NX_LWM2M_CLIENT_PRIORITY

Указывает приоритет потока клиента LWM2M. По умолчанию указано значение 16 для задания приоритета 16.

### <a name="nx_lwm2m_client_max_device_errors"></a>NX_LWM2M_CLIENT_MAX_DEVICE_ERRORS

Указывает максимальное количество кодов ошибок, хранящихся в объекте устройства. Значение по умолчанию: 8.

### <a name="nx_lwm2m_client_max_security_instances"></a>NX_LWM2M_CLIENT_MAX_SECURITY_INSTANCES

Указывает максимальное число экземпляров объекта безопасности. По умолчанию имеет значение 2, чтобы поддерживать сервер начальной загрузки и стандартный сервер.

### <a name="nx_lwm2m_client_max_server_instances"></a>NX_LWM2M_CLIENT_MAX_SERVER_INSTANCES

Указывает максимальное число экземпляров объекта сервера. По умолчанию имеет значение 1, чтобы поддерживать один стандартный сервер.

### <a name="nx_lwm2m_client_max_server_uri"></a>NX_LWM2M_CLIENT_MAX_SERVER_URI

Указывает максимальную длину универсального кода ресурса (URI) сервера, включая завершающий нулевой символ. Значение по умолчанию — 128.

### <a name="nx_lwm2m_client_max_access_control_instances"></a>NX_LWM2M_CLIENT_MAX_ACCESS_CONTROL_INSTANCES

Указывает максимальное число экземпляров службы контроля доступа. По умолчанию имеет значение 0. При этом контроль доступа отключен. Если приложение поддерживает несколько серверов LWM2M, максимальное число экземпляров управления доступом должно совпадать с максимальным числом экземпляров объектов, которые будет поддерживать клиент LWM2M, так как для каждого экземпляра объекта (за исключением экземпляров объекта безопасности) должен быть создан один экземпляр управления доступом.

### <a name="nx_lwm2m_client_max_access_control_acls"></a>NX_LWM2M_CLIENT_MAX_ACCESS_CONTROL_ACLS

Указывает максимальное количество ресурсов ACL на экземпляр службы контроля доступа. Значение по умолчанию — 4.

### <a name="nx_lwm2m_client_max_notifications"></a>NX_LWM2M_CLIENT_MAX_NOTIFICATIONS

Указывает максимальное количество уведомлений, которые будет поддерживать клиент LWM2M. Сервер LWM2M может устанавливать уведомления для объектов, экземпляров объектов и ресурсов. Значение по умолчанию: 8.

### <a name="nx_lwm2m_client_max_resources"></a>NX_LWM2M_CLIENT_MAX_RESOURCES

Указывает максимальное количество ресурсов на объект. Значение по умолчанию: 32.

### <a name="nx_lwm2m_client_bootstrap_idle_timer"></a>NX_LWM2M_CLIENT_BOOTSTRAP_IDLE_TIMER

Указывает максимальное время ожидания запросов сервера начальной загрузки при запуске сеанса начальной загрузки перед прерыванием сеанса. Значение по умолчанию — 60 секунд.

### <a name="nx_lwm2m_client_dtls_start_timeout"></a>NX_LWM2M_CLIENT_DTLS_START_TIMEOUT

Указывает максимальное время ожидания для завершения подтверждения DTLS. Значение по умолчанию - 30 секунды.

### <a name="nx_lwm2m_client_dtls_end_timeout"></a>NX_LWM2M_CLIENT_DTLS_END_TIMEOUT

Указывает максимальное время ожидания для завершения работы DTLS. Значение по умолчанию — 5 секунд.
